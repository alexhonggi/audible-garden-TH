# Audible Garden Turntable GUI 사용자 매뉴얼

이 문서는 Audible Garden Turntable GUI 애플리케이션의 설치, 실행 방법 및 각 기능의 사용법을 설명합니다.

---

## 1. 목차

- [2. 설치 및 실행](#2-설치-및-실행)
- [3. 화면 구성](#3-화면-구성)
- [4. 컨트롤 패널 상세 설명](#4-컨트롤-패널-상세-설명)
  - [4.1. 실행 제어](#41-실행-제어)
  - [4.2. RPM 설정](#42-rpm-설정)
  - [4.3. 모드 설정](#43-모드-설정)
  - [4.4. 악보 제어](#44-악보-제어)
- [5. 기본 사용 시나리오](#5-기본-사용-시나리오)
  - [시나리오 1: 실시간으로 연주하기 (악보 녹음 포함)](#시나리오-1-실시간으로-연주하기-악보-녹음-포함)
  - [시나리오 2: 저장된 악보 불러와서 연주하기](#시나리오-2-저장된-악보-불러와서-연주하기)
- [6. 마우스로 ROI 설정하기 (예정)](#6-마우스로-roi-설정하기-예정)

---

## 2. 설치 및 실행

1.  **Conda 가상 환경 활성화**:
    프로젝트를 실행하기 위해 터미널에서 아래 명령어를 입력하여 `garden` 가상 환경을 활성화합니다.
    ```bash
    conda activate garden
    ```

2.  **GUI 애플리케이션 실행**:
    터미널에서 다음 명령어를 입력하여 GUI를 실행합니다.
    ```bash
    python turntable_gui.py
    ```

---

## 3. 화면 구성

GUI는 크게 두 부분으로 나뉩니다.

-   **① 비디오 화면 (왼쪽)**: 웹캠에서 실시간으로 전송되는 영상이 표시됩니다. 로직이 실행되면 ROI(관심 영역), 스캔라인, 현재 RPM, FPS 등 다양한 정보가 영상 위에 오버레이로 그려집니다.
-   **② 컨트롤 패널 (오른쪽)**: 프로그램의 모든 동작을 제어하는 버튼, 슬라이더, 콤보박스 등이 모여 있습니다.

![GUI Layout](https://i.imgur.com/example.png)  <!-- TODO: Add a real screenshot -->

---

## 4. 컨트롤 패널 상세 설명

### 4.1. 실행 제어

-   **시작 버튼**: 컨트롤 패널에서 설정한 값들로 데이터 처리 로직을 시작합니다.
-   **정지 버튼**: 실행 중인 로직을 모두 멈춥니다. '시작' 버튼을 누르면 다시 활성화됩니다.

### 4.2. RPM 설정

-   **고정 RPM 슬라이더**: 1.0부터 10.0까지의 가상 회전 속도(RPM)를 설정합니다. 실제 회전하는 물체가 없을 때 사용합니다.
-   **실시간 RPM 감지 활성화 체크박스**: 체크하면, 프로그램이 영상의 특징점을 분석하여 실제 회전 속도를 감지합니다. 이 옵션을 활성화하면 고정 RPM 슬라이더는 무시됩니다.

### 4.3. 모드 설정

-   **ROI 모드**:
    -   `Circular`: 원형 모드입니다. 영상에서 턴테이블의 중심(스핀들)을 자동으로 감지하고, 해당 중심에서 바깥쪽으로 향하는 방사형 스캔라인을 그어 픽셀 데이터를 읽습니다. LP 레코드판처럼 중심이 명확한 원형 물체에 적합합니다.
    -   `Rectangular`: 사각형 모드입니다. 지정된 사각형 영역 전체의 픽셀 데이터를 읽습니다.
-   **음계(Scale)**: 스캔한 픽셀의 밝기 값을 어떤 MIDI 음계로 변환할지 선택합니다. (펜타토닉, 피아노 전체, 장조 등)

### 4.4. 악보 제어

-   **첫 바퀴 악보 녹음 체크박스**: '시작' 버튼을 누른 후 첫 한 바퀴 동안 처리된 모든 데이터를 (MIDI 노트, 픽셀 값 등) 저장할지 여부를 결정합니다. 기본적으로 활성화되어 있습니다.
    -   녹음된 데이터는 `images/` 폴더 내에 `타임스탬프_모드_스케일_RPM` 형식의 이름을 가진 폴더에 저장됩니다. (`score.json`, `score.npy`, `score.png` 파일 포함)

-   **저장된 악보 불러오기 버튼**: 이 버튼을 누르면 파일 탐색기가 열립니다. `images/` 폴더에서 이전에 저장했던 세션 폴더를 선택하면 해당 악보 데이터가 프로그램에 로드됩니다.
    -   **중요**: 악보 로딩은 **'정지' 상태에서만** 가능합니다.

-   **불러온 악보 재생 버튼**: 악보가 성공적으로 로드되면 이 버튼이 활성화됩니다.
    -   **클릭 시 (재생 모드)**: 버튼 이름이 "재생 중..."으로 바뀌고, 카메라 영상과 관계없이 불러온 악보 데이터를 반복 재생합니다.
    -   **다시 클릭 시 (실시간 모드)**: 버튼 이름이 원래대로 돌아오고, 다시 실시간 카메라 영상을 처리하는 모드로 전환됩니다. 이를 통해 불러온 악보와 실시간 연주를 쉽게 오갈 수 있습니다.

---

## 5. 기본 사용 시나리오

### 시나리오 1: 실시간으로 연주하기 (악보 녹음 포함)

1.  `python turntable_gui.py`로 GUI를 실행합니다.
2.  컨트롤 패널에서 원하는 `RPM`, `ROI 모드`, `음계`를 설정합니다.
3.  `첫 바퀴 악보 녹음`이 체크되어 있는지 확인합니다.
4.  **시작** 버튼을 누릅니다.
5.  카메라 앞에서 물체를 회전시키거나, 가상 RPM에 따라 연주가 시작됩니다.
6.  첫 한 바퀴가 도는 동안의 연주가 `images/` 폴더에 자동으로 저장됩니다.
7.  연주를 멈추고 싶으면 **정지** 버튼을 누릅니다.

### 시나리오 2: 저장된 악보 불러와서 연주하기

1.  GUI 실행 후, **정지** 상태인지 확인합니다.
2.  **저장된 악보 불러오기** 버튼을 클릭하여 원하는 세션 폴더를 선택합니다.
3.  '악보 로드 완료' 메시지가 뜨면 **불러온 악보 재생** 버튼이 활성화됩니다.
4.  **불러온 악보 재생** 버튼을 클릭하여 재생을 시작합니다.
    -   이때는 '시작' 버튼을 누를 필요가 없습니다.
5.  재생 중에 다시 실시간 연주를 하고 싶다면, 재생 중인 버튼을 다시 한번 클릭하여 '실시간 모드'로 전환한 뒤, **시작** 버튼을 누르면 됩니다.

---

## 6. 마우스로 ROI 설정하기 (예정)

향후 업데이트를 통해 비디오 화면 위에서 사용자가 마우스 클릭과 드래그로 직접 ROI 영역을 설정하는 기능이 추가될 예정입니다.

-   **원형 모드**: 중심점 클릭 -> 반지름 드래그
-   **사각형 모드**: 좌상단 클릭 -> 우하단 드래그 